@import ../../environment
$addon-offset-y: 2px

=highlighted
  &.up-active, &.up-current
    @content

.node
  position: relative
  +font-size($FONT_SIZE, 4px)
  +bold

.node > .node
  display: none
  +font-size($FONT_SIZE - 2px, 3px)
  margin-bottom: 0

.node:not(.is_group) > .node
  margin-left: 20px

.node.is_group
  $color: desaturate(#3182bd, 20%)

  margin-bottom: 2px
  margin-top: 2px
  position: relative

  &:before
    content: ''
    position: absolute
    left: 0
    top: 9px
    right: 0
    height: 1px
    background-color: lighten($color, 30%)
    z-index: 0

  > .node__self
    +font-size($FONT_SIZE - 4px, 3px)
    color: $color
    text-transform: uppercase
    background-color: white
    position: relative
    padding-right: 5px
    z-index: 1
    display: inline-block

  //+ .node
  //  margin-top: 4px


//.node:not(.is_group).is_expanded > .node
//  display: block !important
//
//.node.is_match > .node.is_match
//  display: block
//
//.node.is_group:not(.is_match) > .node
//  display: block

.node:not(.is_match).is_expanded > .node,
.node.is_match.is_force_toggled.is_expanded > .node
  display: block

.node.is_match > .node.is_match
  display: block

.node__self
  color: #888
  display: block

  .node:not(.is_group) > &
    padding-left: 20px

  // Truncate long feature names like up.link.makeFollowable
  // +truncate_text

  .node.is_interface > &
    // Allow the root nodes to wrap since they are English sentences
    // like "Updating fragments from JavaScript"
    white-space: normal

=tint_node_self($color)
  color: $color
  +hover
    color: $COLOR_HOVER
  +highlighted
    background-color: $color
    color: white
    +hover
      background-color: $COLOR_HOVER
      color: white

a.node__self
  +tint_node_self($COLOR_LEFT)

  .node.is_deprecated &,
  .node.is_experimental &
    +tint_node_self($COLOR_PROTECTED)

  .node.is_deprecated &
    text-decoration: line-through

.node__collapser
  font-size: 12px
  position: absolute
  top: $addon-offset-y
  left: 0
  display: block
  +height(20px)
  cursor: pointer

.node mark
  color: $COLOR_ALIZARIN

.node.has_query
  display: none
  &.is_match
    display: block
